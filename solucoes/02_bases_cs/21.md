## Problema

21 - Implementa o programa anterior de forma interativa e em ciclo. O programa
deve solicitar a operação e os dois argumentos ao utilizador, apresentar a
o resultado e voltar a fazer novo pedido de operação. O programa deve terminar
apenas quando o utilizador escrever `END` em qualquer uma das solicitações.
Se o programa não reconhecer a operação, deve voltar a pedir a mesma ao
utilizador. Ao terminar, o programa deve indicar ainda quantas operações
realizou.

## Soluções

### Solução 1

```cs
using System;

namespace Ex_21 {
    class Program {
        static void Main(string[] args) {
            //Declarar as variaveis double que servem para guardar os numeros
            double n1, n2;
            //Declarar a string que vai guardar a operacao
            string operacao = args[0];
            //Declarar variaveis que vao guardar os doubles em forma de string
            string s1 = args[1];
            string s2 = args[2];
            //Declarar variavel que guarda o tamanho de argumentos
            int numArg = args.Length;
            //Declarar contador de vezes que o programa corre
            int contador = 0;
            //Declarar mensagens de erro
            string msg1 = "São necessários 3 argumentos separados por espaço "
                + "(ex: + 3.2 5). Por favor verifique e corra de novo";
            string msg2 = "O primeiro argumento só aceita os seguintes"
                    + " operadores +, -, /, x, p. Por favor verifique e corra "
                    + "de novo";
            string msg3 = "Pelo menos um dos argumentos não é um número. Por "
                + "favor verifique e corra de novo";
            string msg4 = "Se quiser continuar introduza novamente os " +
                "argumentos, se não, introduza END";
            //Declarar string temporaria
            string temp = "";



            while (operacao != "END") {

                n1 = Convert.ToDouble(s1);
                n2 = Convert.ToDouble(s2);

                if (numArg != 3 || temp == "arg+4") {
                    //Caso o numero de argumentos nao corresponda a 3 aparece a
                    //mensagem de erro apropriada

                    Console.WriteLine(msg1);
                } else if ((operacao != "+") && (operacao != "-") &&
                    (operacao != "/") && (operacao != "x") &&
                    (operacao != "p")) {
                    //Caso o primeiro argumento nao seja um dos operadores 
                    //validos aparece a mensagem de erro apropriada

                    Console.WriteLine(msg2);
                } else {
                    if (Double.TryParse(s1, out n1) &&
                        Double.TryParse(s2, out n2)) {
                        //Caso o segundo e terceiro argumento introduzidos 
                        //sejam numeros ira fazer a conta

                        Console.WriteLine(Calcula(operacao, n1, n2));
                    } else {
                        //Caso pelo menos um dos dos argumentos nao seja um 
                        //numero aparece a mensagem apropriada

                        Console.WriteLine(msg3);
                    }
                }
                //Soma mais um ao contador
                contador++;
                //Mostra a mensagem correspondente
                Console.WriteLine(msg4);
                //Fica a espera de ler o input do utilizador novamente
                temp = Console.ReadLine();
                //Chama a funcao LerValores para separar a string lida em 
                //argumentos
                LerValores(ref temp, ref operacao, ref s1, ref s2, ref numArg);
            }

            Console.WriteLine("Realizou " + contador + " operações!");
            //Garante que a linha de comandos não fecha enquanto nao for
            //introduzido um input
            Console.ReadKey();
        }

        static void LerValores(ref string temp, ref string op, ref string s1, 
            ref string s2, ref int numArg) {

            //Separa a string lida em várias strings que correspondem aos 
            //elementos
            string[] argumentos = temp.Split(' ');

            //Passa os valores correspondentes
            for (int i = 0; i < argumentos.Length; i++) {
                switch (i) {
                    case 0:
                        op = argumentos[i];
                        break;
                    case 1:
                        s1 = argumentos[i];
                        break;
                    case 2:
                        s2 = argumentos[i];
                        break;
                    case 3:
                        temp = "arg+4";
                        break;
                }
            }

            numArg = argumentos.Length;

        }

        static double Calcula(string op, double n1, double n2) {
            //Declara variavel double que vai guardar o resultado
            double result = 0;

            //Executa a operacao correspondente conforme o argumento lido
            switch (op) {
                case "+":
                    result = n1 + n2;
                    break;
                case "-":
                    result = n1 - n2;
                    break;
                case "/":
                    result = n1 / n2;
                    break;
                case "x":
                    result = n1 * n2;
                    break;
                case "p":
                    result = Math.Pow(n1, n2);
                    break;
            }

            return result;
        }
    }
}
```

*Por [João Duarte](https://github.com/JoaoAlexandreDuarte)*
